<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<!-- Bootstrap 4 -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
	<!-- Amchart 4 -->
	<script src="https://www.amcharts.com/lib/4/core.js"></script>
	<script src="https://www.amcharts.com/lib/4/charts.js"></script>
	<script src="https://www.amcharts.com/lib/4/plugins/forceDirected.js"></script>
	<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
	<!-- AOS.js -->
	<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
	<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

	<script src="https://d3js.org/d3.v5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"></script>

	<!-- Styles -->
	<style>
		.img {  
        width: 250px;
        height: 125px;
     /*text-align: 不能再视图中使其居中 css里只能识别这种星号的注释 */
    		}	

    	.search {
        margin-top: -1cm;
        padding-top: 5px;
        padding-bottom: 5px;
        padding-left: 5px;
        border-color: blue;
        width: 50%;
        position:relative;
   			 }

   		.submit {
        position:absolute;
        margin-top: 0cm;
        top:250px;
        left:420px;
        border-color: blue;
        width: 80px;
        height: 30px;
            }

    	.submit2 {
        position:absolute;
        margin-top: 0cm;
        top:250px;
        left:750px;
        border-color: blue;
        width: 150px;
        height: 30px;
            }
    


		#section10 a {
		  padding-top: 60px;
		}
		#section10 a span {
		  position: absolute;
		  top: 80vh;
		  left: 50%;
		  width: 30px;
		  height: 50px;
		  margin-left: -15px;
		  border: 2px solid #000;
		  border-radius: 50px;
		  box-sizing: border-box;
		}
		#section10 a span::before {
		  position: absolute;
		  top: 10px;
		  left: 50%;
		  content: '';
		  width: 6px;
		  height: 6px;
		  margin-left: -3px;
		  background-color: #000;
		  border-radius: 100%;
		  -webkit-animation: sdb10 2s infinite;
		  animation: sdb10 2s infinite;
		  box-sizing: border-box;
		}
		@-webkit-keyframes sdb10 {
		  0% {
		    -webkit-transform: translate(0, 0);
		    opacity: 0;
		  }
		  40% {
		    opacity: 1;
		  }
		  80% {
		    -webkit-transform: translate(0, 20px);
		    opacity: 0;
		  }
		  100% {
		    opacity: 0;
		  }
		}
		@keyframes sdb10 {
		  0% {
		    transform: translate(0, 0);
		    opacity: 0;
		  }
		  40% {
		    opacity: 1;
		  }
		  80% {
		    transform: translate(0, 20px);
		    opacity: 0;
		  }
		  100% {
		    opacity: 0;
		  }
		}

		#keywordTrendContainer circle {

		}
	</style>
</head>

<body>

<nav class="navbar navbar-expand-md navbar-dark bg-dark " style="background-color: #e3f2fd;">
    
    <div class="mx-auto order-0">
        <a class="navbar-brand mx-auto" href="#">MiMir</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
    <div class="navbar-collapse collapse w-100 order-3 dual-collapse2">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link" href="#">Right</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
            </li>
        </ul>
    </div>
</nav>

	{% load staticfiles %}
	<!-- Home Page -->
	<div class="container-fluid" style="height: 100vh;">
		<div class="row">
			<div class="col">
				<img class="img mt-5" src="/static/mimir5.png" style="display:block; margin:auto;"/>

		        <form action=""method="post"> {% csrf_token %}
		        <input class="search" type="text" name="search"  placeholder="在mimir上搜索或輸入您想要的關鍵字" style="display:block; margin:auto;"/>

		        <input class="submit"  type="submit"value="送出">

		        </form>

		        <input class="submit2" type="button" value="使用產業類別搜尋" onclick="location.href='https://tw.stock.yahoo.com/h/kimosel.php'">


				<section id="section10" class="demo">
				  <a href="#thanks"><span></span></a>
				</section>
		
			</div>
		</div>
	</div>

	<!-- Keyword Trend Chart -->
	<div class="container-fluid bg-light" style="height: 100vh;" id="keywordTrendContainer">
		<!-- Row 1 -->
		<div class="row h-100">
			<div class="col-4 text-center h-100">

				<div class="row justify-content-center flex-column h-100">
					<div class="col-6 text-center mw-100">
						<h2 class="mt-5">關鍵字趨勢 -「{{search}}」</h2>
						<p>透過一段時間的新聞資訊，得知關鍵字的新聞每日變化量。</p>
					
					</div>
					<div class="col-6 text-center mw-100">


						<button type="button" class="btn btn-info mr-5" id="Total_btn">Total Chart
						</button>
					

						<button type="button" class="btn btn-info" id="Positive_btn">Positive
						</button>

						<button type="button" class="btn btn-info ml-4" id="Negative_btn">Negative</button>
						<hr>
						<form action="" method="">
							<label >Start Date</label>
							<input type="date" name="bday" max="3000-12-31" 
							       min="1000-01-01" class="form-control">
							<label class="mt-2">End Date</label>
							<input type="date" name="bday" min="1000-01-01"
							       max="3000-12-31" class="form-control">
							<button type="submit" class="btn btn-primary btn-block mt-3">Submit</button>
						</form>										
					</div>
				</div>
			</div>
			<div class="col-8 h-100">
				
				<!-- keywordTrendChart  HTML -->
				<div class="h-100" style="display: block;" id="keywordTrendChart">			
				</div>

				<!-- Positive chart  HTML -->
				<div class="h-100" style="display: none;" id="PositiveTrendChart" >
					
				</div>

				<!-- Negative chart  HTML -->
				<div class="h-100" style="display: none;" id="NegativeTrendChart" >
					
				</div>


			</div>

		</div>	
	</div>

	<!-- Financual Sentiment Chart -->
	<div class="container-fluid bg-light mt-5" style="height: 100vh;" data-aos="fade-up" data-aos-duration="800">
		<!-- Row 1 -->
		<div class="row h-100">
			<div class="col-4 text-center h-100">

				<div class="row justify-content-center flex-column h-100">
					<div class="col-10 text-center mw-100">
						<h1 class="mt-5">金融用字情緒趨勢</h1>
						<p>判斷資料內容為正面或負面評價。使用機器學習模型訓練出來針對金融用詞的情緒趨勢。</p>
					</div>
					<div class="col-2 text-center mw-100">
						<button type="button"  id="pie_chart_btn2" class="btn btn-info mr-5">Pie Chart </button>
						<button type="button"  id="fin_cloud_word_btn" class="btn btn-info">Word Cloud </button>
						<button type="button" id="fin_bar_chart_btn" class="btn btn-info ml-5">Bar_Chart</button>							
					</div>
				</div>
			</div>
			<div class="col-8 h-100">
				<!-- HTML -->
				<div class="h-100" id="financialSentimentChart" style="display: block;"></div>
				 <!--  word cloud chart -->
				
				<div class="h-100 align-self-center" id="Positive_fin_wordcloud" style="display: none; border: 0px solid #eee; height: 580px; width:700px;margin:0 auto;"></div>
				<div class="h-100 align-self-center" id="Negative_fin_wordcloud" style="display: none; border: 0px solid #eee; height: 580px; width:700px;margin:0 auto;"></div>

				<!-- fin bar chart -->
				<div class="h-100" id="fin_pos_bar_chart" style="display: none;"></div>
				<div class="h-100" id="fin_neg_bar_chart" style="display: none;"></div>
			</div>
		</div>	
	</div>

	<!-- Normal Sentiment Chart -->
	<div class="container-fluid bg-light mt-5" style="height: 100vh;" data-aos="fade-up" data-aos-duration="800">
		<!-- Row 1 -->
		<div class="row h-100">
			<div class="col-4 text-center h-100">

				<div class="row justify-content-center flex-column h-100">
					<div class="col-10 text-center mw-100">
						<h1 class="mt-5">普通用字情緒趨勢</h1>
						<p>判斷資料內容為正面或負面評價。使用機器學習模型訓練出來的情緒趨勢。</p>
					</div>
					<div class="col-2 text-center mw-100">
						
						<button type="button"  id="pie_chart_btn" class="btn btn-info mr-5">Pie Chart </button>
						<button type="button"  id="cloud_word_btn" class="btn btn-info">Word Cloud </button>
						<button type="button" id="bar_chart_btn" class="btn btn-info ml-5">Bar_Chart</button>							
					</div>
				</div>
			</div>
			<div class="col-8 h-100">
				<!-- HTML -->
				<div class="h-100" style="display: block;" id="normalSentimentChart"></div>

		        <!--  word cloud chart -->
				
				<div class="h-100 align-self-center" id="Positive_sent_wordcloud" style="display: none; border: 0px solid #eee; height: 580px; width:700px;margin:0 auto;"></div>
				<div class="h-100 align-self-center" id="Negative_sent_wordcloud" style="display: none; border: 0px solid #eee; height: 580px; width:700px;margin:0 auto;"></div>

				<!--   bar chart chart -->
				<div class="h-100" style="display: none;" id="Positive_sent_bar"></div>
				<div class="h-100" style="display: none;" id="Negative_sent_bar"></div>

			</div>
		</div>	
	</div>

	<!-- Trend Bubble Chart -->
	 <div class="container-fluid bg-light mt-5" style="height: 100vh;" data-aos="fade-up" data-aos-duration="800">
		<!-- Row 1 -->
		<div class="row h-100">
			<div class="col-4 text-center h-100">

				<div class="row justify-content-center flex-column h-100">
					<div class="col-6 text-center mw-100">
						<h1 class="mt-5">趨勢泡泡圖</h1>
						<p>在指定的時間範圍內，把提及最多的公司。</p>
					</div>
					<div class="col-4 text-center mw-100">
						<form action="" method="">
							<label >Begin voorverkoop periode</label>
							<input type="date" name="bday" max="3000-12-31" 
							       min="1000-01-01" class="form-control">
							<label class="mt-2">Einde voorverkoop periode</label>
							<input type="date" name="bday" min="1000-01-01"
							       max="3000-12-31" class="form-control">
							<button type="submit" class="btn btn-primary btn-block mt-3">Submit</button>
						</form>			
					</div>
				</div>
			</div>
			<div class="col-8 h-100">
				<!-- HTML -->
				<div class="h-100" id="trendBubbletChart"></div>
			</div>
		</div>	
	</div>

	<!-- js function初始化 -->
	<script> 
		
		AOS.init();
	</script>


	<!-- Keyword Trend Chart JS -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		// Create chart instance
		var chart = am4core.create("keywordTrendChart", am4charts.XYChart);

		// Create chart instance


		var data1 = []
		var dict1 = {{news_trend_count|safe}};

		for (key in dict1)
		{	
			data1.push({"date":key, "value":dict1[key]});
		}

		// Add data
		chart.data = data1;

				// Set input format for the dates
		chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

		// Create axes
		var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

		// Create series
		var series = chart.series.push(new am4charts.LineSeries());
		series.dataFields.valueY = "value";
		series.dataFields.dateX = "date";
		series.tooltipText = "{value}"
		series.strokeWidth = 2;
		series.minBulletDistance = 15;

		// Drop-shaped tooltips
		series.tooltip.background.cornerRadius = 20;
		series.tooltip.background.strokeOpacity = 0;
		series.tooltip.pointerOrientation = "vertical";
		series.tooltip.label.minWidth = 40;
		series.tooltip.label.minHeight = 40;
		series.tooltip.label.textAlign = "middle";
		series.tooltip.label.textValign = "middle";

		// Make bullets grow on hover
		var bullet = series.bullets.push(new am4charts.CircleBullet());
		bullet.circle.strokeWidth = 2;
		bullet.circle.radius = 10;
		bullet.circle.fill = am4core.color("#00BBFF");

		var bullethover = bullet.states.create("hover");
		bullethover.properties.scale = 1.3;

		// Make a panning cursor
		chart.cursor = new am4charts.XYCursor();
		chart.cursor.behavior = "panXY";
		chart.cursor.xAxis = dateAxis;
		chart.cursor.snapToSeries = series;

		// Create vertical scrollbar and place it before the value axis
		chart.scrollbarY = new am4core.Scrollbar();
		chart.scrollbarY.parent = chart.leftAxesContainer;
		chart.scrollbarY.toBack();

		// Create a horizontal scrollbar with previe and place it underneath the date axis
		chart.scrollbarX = new am4charts.XYChartScrollbar();
		chart.scrollbarX.series.push(series);
		chart.scrollbarX.parent = chart.bottomAxesContainer;

	
		}); // end am4core.ready()
	</script>

	<!-- Financial Chart JS-->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		// Create chart instance
		var chart = am4core.create("financialSentimentChart", am4charts.PieChart);

		// Add and configure Series
		var pieSeries = chart.series.push(new am4charts.PieSeries());
		pieSeries.dataFields.value = "litres";
		pieSeries.dataFields.category = "country";

		// Let's cut a hole in our Pie chart the size of 30% the radius
		chart.innerRadius = am4core.percent(30);

		// Put a thick white border around each Slice
		pieSeries.slices.template.stroke = am4core.color("#fff");
		pieSeries.slices.template.strokeWidth = 2;
		pieSeries.slices.template.strokeOpacity = 1;
		pieSeries.slices.template
		  // change the cursor on hover to make it apparent the object can be interacted with
		  .cursorOverStyle = [
		    {
		      "property": "cursor",
		      "value": "pointer"
		    }
		  ];

		pieSeries.alignLabels = false;
		pieSeries.labels.template.bent = true;
		pieSeries.labels.template.radius = 3;
		pieSeries.labels.template.padding(0,0,0,0);

		pieSeries.ticks.template.disabled = true;

		// Create a base filter effect (as if it's not there) for the hover to return to
		var shadow = pieSeries.slices.template.filters.push(new am4core.DropShadowFilter);
		shadow.opacity = 0;

		// Create hover state
		var hoverState = pieSeries.slices.template.states.getKey("hover"); // normally we have to create the hover state, in this case it already exists

		// Slightly shift the shadow and make it more prominent on hover
		var hoverShadow = hoverState.filters.push(new am4core.DropShadowFilter);
		hoverShadow.opacity = 0.7;
		hoverShadow.blur = 5;

		// Add a legend
		chart.legend = new am4charts.Legend();

		chart.data = 
		[
			{
			  "country": "Positive",
			  "litres": {{pos_fin_count}}
			},
			{
			  "country": "Negative",
			  "litres": {{neg_fin_count}}
			},
		];

		}); // end am4core.ready()
	</script>

	<!-- Normal Chart JS-->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		// Create chart instance
		var chart = am4core.create("normalSentimentChart", am4charts.PieChart);

		// Add and configure Series
		var pieSeries = chart.series.push(new am4charts.PieSeries());
		pieSeries.dataFields.value = "litres";
		pieSeries.dataFields.category = "country";

		// Let's cut a hole in our Pie chart the size of 30% the radius
		chart.innerRadius = am4core.percent(30);

		// Put a thick white border around each Slice
		pieSeries.slices.template.stroke = am4core.color("#fff");
		pieSeries.slices.template.strokeWidth = 2;
		pieSeries.slices.template.strokeOpacity = 1;
		pieSeries.slices.template
		  // change the cursor on hover to make it apparent the object can be interacted with
		  .cursorOverStyle = [
		    {
		      "property": "cursor",
		      "value": "pointer"
		    }
		  ];

		pieSeries.alignLabels = false;
		pieSeries.labels.template.bent = true;
		pieSeries.labels.template.radius = 3;
		pieSeries.labels.template.padding(0,0,0,0);

		pieSeries.ticks.template.disabled = true;

		// Create a base filter effect (as if it's not there) for the hover to return to
		var shadow = pieSeries.slices.template.filters.push(new am4core.DropShadowFilter);
		shadow.opacity = 0;

		// Create hover state
		var hoverState = pieSeries.slices.template.states.getKey("hover"); // normally we have to create the hover state, in this case it already exists

		// Slightly shift the shadow and make it more prominent on hover
		var hoverShadow = hoverState.filters.push(new am4core.DropShadowFilter);
		hoverShadow.opacity = 0.7;
		hoverShadow.blur = 5;

		// Add a legend
		chart.legend = new am4charts.Legend();

		chart.data = 
		[
			{
			  "country": "Positive",
			  "litres": {{pos_count}}
			},
			{
			  "country": "Negative",
			  "litres": {{neg_count}}
			},
		];

		}); // end am4core.ready()
	</script>

	<!-- Trend Bubble Chart JS -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		var chart = am4core.create("trendBubbletChart", am4plugins_forceDirected.ForceDirectedTree);
		var networkSeries = chart.series.push(new am4plugins_forceDirected.ForceDirectedSeries())

		var data = []
		var dict = {{company_rank|safe}};

		for (key in dict)
		{	
			data.push({"name":key, "value":dict[key]});
		}


		chart.data = data;

		networkSeries.dataFields.value = "value";
		networkSeries.dataFields.name = "name";
		networkSeries.dataFields.children = "children";
		networkSeries.nodes.template.tooltipText = "{name}:{value}";
		networkSeries.nodes.template.fillOpacity = 1;
		networkSeries.dataFields.id = "name";
		networkSeries.dataFields.linkWith = "linkWith";


		networkSeries.nodes.template.label.text = "{name}"
		networkSeries.fontSize = 10;

		var selectedNode;

		var label = chart.createChild(am4core.Label);
		label.text = "Click on nodes to link"
		label.x = 50;
		label.y = 50;
		label.isMeasured = false;


		networkSeries.nodes.template.events.on("up", function (event) {
		  var node = event.target;
		  if (!selectedNode) {
		    node.outerCircle.disabled = false;
		    node.outerCircle.strokeDasharray = "3,3";
		    selectedNode = node;
		  }
		  else if (selectedNode == node) {
		    node.outerCircle.disabled = true;
		    node.outerCircle.strokeDasharray = "";
		    selectedNode = undefined;
		  }
		  else {
		    var node = event.target;

		    var link = node.linksWith.getKey(selectedNode.uid);

		    if (link) {
		      node.unlinkWith(selectedNode);
		    }
		    else {
		      node.linkWith(selectedNode, 0.2);
		    }
		  }
		})

		}); // end am4core.ready()

	</script>




	<!-- Keyword Trend  Positive  Chart JS -->

	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		// Create chart instance
		var chart = am4core.create("PositiveTrendChart", am4charts.XYChart);

		// Create chart instance

		var data2 = []
		var dict2 = {{positive_trend_chart|safe}};

		for (key in dict2)
		{	
			data2.push({"date":key, "value":dict2[key],"aValue": 10});
		}

		// Add data
		chart.data = data2;

				// Set input format for the dates
		chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

		// Create axes
		var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

		// Create series
		var series = chart.series.push(new am4charts.LineSeries());
		series.dataFields.valueY = "value";
		series.dataFields.dateX = "date";
		series.tooltipText = "{value}"
		series.strokeWidth = 2;
		series.minBulletDistance = 15;

		// Drop-shaped tooltips
		series.tooltip.background.cornerRadius = 20;
		series.tooltip.background.strokeOpacity = 0;
		series.tooltip.pointerOrientation = "vertical";
		series.tooltip.label.minWidth = 40;
		series.tooltip.label.minHeight = 40;
		series.tooltip.label.textAlign = "middle";
		series.tooltip.label.textValign = "middle";

		// Make bullets grow on hover
		var bullet = series.bullets.push(new am4charts.CircleBullet());
		bullet.circle.strokeWidth = 2;
		bullet.circle.radius = 10;
		bullet.circle.fill = am4core.color("#00BBFF");

		var bullethover = bullet.states.create("hover");
		bullethover.properties.scale = 1.3;

		// Make a panning cursor
		chart.cursor = new am4charts.XYCursor();
		chart.cursor.behavior = "panXY";
		chart.cursor.xAxis = dateAxis;
		chart.cursor.snapToSeries = series;

		// Create vertical scrollbar and place it before the value axis
		chart.scrollbarY = new am4core.Scrollbar();
		chart.scrollbarY.parent = chart.leftAxesContainer;
		chart.scrollbarY.toBack();

		// Create a horizontal scrollbar with previe and place it underneath the date axis
		chart.scrollbarX = new am4charts.XYChartScrollbar();
		chart.scrollbarX.series.push(series);
		chart.scrollbarX.parent = chart.bottomAxesContainer;

	
		}); // end am4core.ready()
	</script>

	<!-- Keyword Trend  Negative  Chart JS -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

		// Create chart instance
		var chart = am4core.create("NegativeTrendChart", am4charts.XYChart);

		// Create chart instance

		var data3 = []
		var dict3 = {{negative_trend_chart|safe}};

		for (key in dict3)
		{	
			data3.push({"date":key, "value":dict3[key],"aValue": 10});
		}

		// Add data
		chart.data = data3;

				// Set input format for the dates
		chart.dateFormatter.inputDateFormat = "yyyy-MM-dd";

		// Create axes
		var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

		// Create series
		var series = chart.series.push(new am4charts.LineSeries());
		series.dataFields.valueY = "value";
		series.dataFields.dateX = "date";
		series.tooltipText = "{value}"
		series.strokeWidth = 2;
		series.minBulletDistance = 15;

		// Drop-shaped tooltips
		series.tooltip.background.cornerRadius = 20;
		series.tooltip.background.strokeOpacity = 0;
		series.tooltip.pointerOrientation = "vertical";
		series.tooltip.label.minWidth = 40;
		series.tooltip.label.minHeight = 40;
		series.tooltip.label.textAlign = "middle";
		series.tooltip.label.textValign = "middle";

		// Make bullets grow on hover
		var bullet = series.bullets.push(new am4charts.CircleBullet());
		bullet.circle.strokeWidth = 2;
		bullet.circle.radius = 10;
		bullet.circle.fill = am4core.color("#00BBFF");

		var bullethover = bullet.states.create("hover");
		bullethover.properties.scale = 1.3;

		// Make a panning cursor
		chart.cursor = new am4charts.XYCursor();
		chart.cursor.behavior = "panXY";
		chart.cursor.xAxis = dateAxis;
		chart.cursor.snapToSeries = series;

		// Create vertical scrollbar and place it before the value axis
		chart.scrollbarY = new am4core.Scrollbar();
		chart.scrollbarY.parent = chart.leftAxesContainer;
		chart.scrollbarY.toBack();

		// Create a horizontal scrollbar with previe and place it underneath the date axis
		chart.scrollbarX = new am4charts.XYChartScrollbar();
		chart.scrollbarX.series.push(series);
		chart.scrollbarX.parent = chart.bottomAxesContainer;

	
		}); // end am4core.ready()
	</script>

	<!-- Keyword Trend Chart Three Botton -->
	
	<script>

		// First Botton
		var my_btn1 = document.querySelector('#Total_btn');

		my_btn1.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#keywordTrendChart');
  		var bk2 = document.querySelector('#PositiveTrendChart');
  		var bk3 = document.querySelector('#NegativeTrendChart');
		  if (bk1.style.display == 'none') {
      		bk1.style.display = 'block';
      		bk2.style.display = 'none';
      		bk3.style.display = 'none';
  		} 
		}, false);

		// Second Botton
		var my_btn2 = document.querySelector('#Positive_btn');

		my_btn2.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#keywordTrendChart');
  		var bk2 = document.querySelector('#PositiveTrendChart');
  		var bk3 = document.querySelector('#NegativeTrendChart');
		   if (bk2.style.display == 'none') {
      		bk2.style.display = 'block';
      		bk1.style.display = 'none';
      		bk3.style.display = 'none';
  		} 
		}, false);
		// Third Botton
		var my_btn3 = document.querySelector('#Negative_btn');

		my_btn3.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#keywordTrendChart');
  		var bk2 = document.querySelector('#PositiveTrendChart');
  		var bk3 = document.querySelector('#NegativeTrendChart');
		   if (bk3.style.display == 'none') {
      		bk3.style.display = 'block';
      		bk1.style.display = 'none';
      		bk2.style.display = 'none';
  		} 
		}, false);
	</script>





	<!--  Trend Chart Three Botton 金融字典按鈕設定-->
	
	<script>

		// First Botton
		var my_btn1 = document.querySelector('#pie_chart_btn2');

		my_btn1.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#financialSentimentChart');
  		var bk2 = document.querySelector('#fin_pos_bar_chart');
 		var bk3 = document.querySelector('#fin_neg_bar_chart');
 		var bk4 = document.querySelector('#Positive_fin_wordcloud');
 		var bk5 = document.querySelector('#Negative_fin_wordcloud');

		  if (bk1.style.display == 'none') {
      		bk1.style.display = 'block';
      		bk2.style.display = 'none';
      		bk3.style.display = 'none';
      		bk4.style.display = 'none';
      		bk5.style.display = 'none';
  		} 
		}, false);

		// Second Botton
		var my_btn2 = document.querySelector('#fin_bar_chart_btn');

		my_btn2.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#financialSentimentChart');
  		var bk2 = document.querySelector('#fin_pos_bar_chart');
  		var bk3 = document.querySelector('#fin_neg_bar_chart');
  		var bk4 = document.querySelector('#Positive_fin_wordcloud');
  		var bk5 = document.querySelector('#Negative_fin_wordcloud');


		   if (bk2.style.display == 'none' && bk3.style.display == 'none') 
		   {
      		 bk2.style.display = 'block';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';
  			}
		   else if (bk2.style.display == 'block' && bk3.style.display == 'none') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'block';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';

  			}
		   else if  (bk2.style.display == 'none' && bk3.style.display == 'block') 
		   {
      		 bk2.style.display = 'block';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';
  			}

		}, false);
		// Third Botton
		// Second Botton
		var my_btn3 = document.querySelector('#fin_cloud_word_btn');

		my_btn3.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#financialSentimentChart');
  		var bk2 = document.querySelector('#fin_pos_bar_chart');
  		var bk3 = document.querySelector('#fin_neg_bar_chart');
  		var bk4 = document.querySelector('#Positive_fin_wordcloud');
  		var bk5 = document.querySelector('#Negative_fin_wordcloud');

		   if (bk4.style.display == 'none' && bk5.style.display == 'none') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'block';
      		 bk5.style.display = 'none';
  			}
		   else if (bk4.style.display == 'block' && bk5.style.display == 'none') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'block';

  			}
		   else if  (bk4.style.display == 'none' && bk5.style.display == 'block') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'block';
      		 bk5.style.display = 'none';
  			}

		}, false);

	</script>


	<!-- 正向金融文字雲 -->
	<script>
		//取得d3顏色

	     var fill = d3.scaleOrdinal(d3.schemeCategory10);
	    //文字雲/關鍵字，及字型大小（這邊只放三個）
	    var data12 = []
		var dict12 = {{normlize_pos_fin|safe}};

			for (key in dict12)
			{	
				data12.push({text:key, size:(dict12[key])*10});
			}



	    //取得呈現處的寬、高
	    var w = parseInt(d3.select("#Positive_fin_wordcloud").style("width"), 10);
	    var h = parseInt(d3.select("#Positive_fin_wordcloud").style("height"), 10);

	    d3.layout.cloud().size([w, h])
	            .words(data12)
	            .padding(2)

	            .rotate(function () {
	                return ~~(Math.random() * 2) * 90;
	            })
	            .rotate(function () {
	                return 0;
	            })
	            .font("Microsoft JhengHei") 
	            .fontSize(function (d) {
	                return d.size;
	            })

	            .on("end", draw)
	            .start();

	    	function draw(words) {
	        d3.select("#Positive_fin_wordcloud").append("svg")
	                .attr("width", w)
	                .attr("height", h)
	                .append("g")
	                .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")")
	                .selectAll("text")
	                .data(words)
	                .enter().append("text")
	                .style("font-size", function (d) {
	                    return d.size + "px";
	                })
	                .style("font-family", "Microsoft JhengHei")
	                .style("cursor", 'pointer')
	                .style("fill", function (d, i) {
	                    return fill(i);
	                })
	                .attr("text-anchor", "middle")
	                .attr("transform", function (d) {
	                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
	                })
	                .text(function (d) {
	                    return d.text;
	                })
	                .on("click", function (d) {
	                    window.open("/pos_fin_table", '_blank');
	                });
	    }
	</script>

	<!-- 負向金融文字雲 -->
	<script>
		//取得d3顏色

	     var fill = d3.scaleOrdinal(d3.schemeCategory10);
	    //文字雲/關鍵字，及字型大小（這邊只放三個）
	    var data13 = []
		var dict13 = {{normlize_neg_fin|safe}};

			for (key in dict13)
			{	
				data13.push({text:key, size:(dict13[key])*10});
			}



	    //取得呈現處的寬、高
	    var w = parseInt(d3.select("#Negative_fin_wordcloud").style("width"), 10);
	    var h = parseInt(d3.select("#Negative_fin_wordcloud").style("height"), 10);

	    d3.layout.cloud().size([w, h])
	            .words(data13)
	            .padding(2)

	            .rotate(function () {
	                return ~~(Math.random() * 2) * 90;
	            })
	            .rotate(function () {
	                return 0;
	            })
	            .font("Microsoft JhengHei") 
	            .fontSize(function (d) {
	                return d.size;
	            })

	            .on("end", draw)
	            .start();

	    	function draw(words) {
	        d3.select("#Negative_fin_wordcloud").append("svg")
	                .attr("width", w)
	                .attr("height", h)
	                .append("g")
	                .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")")
	                .selectAll("text")
	                .data(words)
	                .enter().append("text")
	                .style("font-size", function (d) {
	                    return d.size + "px";
	                })
	                .style("font-family", "Microsoft JhengHei")
	                .style("cursor", 'pointer')
	                .style("fill", function (d, i) {
	                    return fill(i);
	                })
	                .attr("text-anchor", "middle")
	                .attr("transform", function (d) {
	                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
	                })
	                .text(function (d) {
	                    return d.text;
	                })
	                .on("click", function (d) {
	                	window.open("/neg_fin_table", '_blank');
	                });
	    }
	</script>

	<!-- 正向金融  bar chart code -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

	    var data_fin_ba_chart = []
		var dict10 = {{pos_fin_text_count|safe}};

			for (key in dict10)
			{	
				data_fin_ba_chart.push({"country":key, "visits":dict10[key]});
			}

		// Create chart instance
		var chart = am4core.create("fin_pos_bar_chart", am4charts.XYChart);
		chart.scrollbarX = new am4core.Scrollbar();

		// Add data
		chart.data = data_fin_ba_chart;

		// Create axes
		var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
		categoryAxis.dataFields.category = "country";
		categoryAxis.renderer.grid.template.location = 0;
		categoryAxis.renderer.minGridDistance = 30;
		categoryAxis.renderer.labels.template.horizontalCenter = "middle";
		categoryAxis.renderer.labels.template.verticalCenter = "middle";
		// categoryAxis.renderer.labels.template.rotation = 270;
		categoryAxis.tooltip.disabled = true;
		categoryAxis.renderer.minHeight = 110;

		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
		valueAxis.renderer.minWidth = 50;

		// Create series
		var series = chart.series.push(new am4charts.ColumnSeries());
		series.sequencedInterpolation = true;
		series.dataFields.valueY = "visits";
		series.dataFields.categoryX = "country";
		series.tooltipText = "[{categoryX}: bold]{valueY}[/]";
		series.columns.template.strokeWidth = 0;

		series.tooltip.pointerOrientation = "vertical";

		series.columns.template.column.cornerRadiusTopLeft = 10;
		series.columns.template.column.cornerRadiusTopRight = 10;
		series.columns.template.column.fillOpacity = 0.8;

		// on hover, make corner radiuses bigger
		var hoverState = series.columns.template.column.states.create("hover");
		hoverState.properties.cornerRadiusTopLeft = 0;
		hoverState.properties.cornerRadiusTopRight = 0;
		hoverState.properties.fillOpacity = 1;

		series.columns.template.adapter.add("fill", function(fill, target) {
		  return chart.colors.getIndex(target.dataItem.index);
		});

		// Cursor
		chart.cursor = new am4charts.XYCursor();

		}); // end am4core.ready()
	</script>


	<!-- 負向金融  bar chart code -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

	    var dta11 = []
		var dict11 = {{neg_fin_text_count|safe}};

			for (key in dict11)
			{	
				dta11.push({"country":key, "visits":dict11[key]});
			}

		// Create chart instance
		var chart = am4core.create("fin_neg_bar_chart", am4charts.XYChart);
		chart.scrollbarX = new am4core.Scrollbar();

		// Add data
		chart.data = dta11;

		// Create axes
		var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
		categoryAxis.dataFields.category = "country";
		categoryAxis.renderer.grid.template.location = 0;
		categoryAxis.renderer.minGridDistance = 30;
		categoryAxis.renderer.labels.template.horizontalCenter = "middle";
		categoryAxis.renderer.labels.template.verticalCenter = "middle";
		// categoryAxis.renderer.labels.template.rotation = 270;
		categoryAxis.tooltip.disabled = true;
		categoryAxis.renderer.minHeight = 110;

		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
		valueAxis.renderer.minWidth = 50;

		// Create series
		var series = chart.series.push(new am4charts.ColumnSeries());
		series.sequencedInterpolation = true;
		series.dataFields.valueY = "visits";
		series.dataFields.categoryX = "country";
		series.tooltipText = "[{categoryX}: bold]{valueY}[/]";
		series.columns.template.strokeWidth = 0;

		series.tooltip.pointerOrientation = "vertical";

		series.columns.template.column.cornerRadiusTopLeft = 10;
		series.columns.template.column.cornerRadiusTopRight = 10;
		series.columns.template.column.fillOpacity = 0.8;

		// on hover, make corner radiuses bigger
		var hoverState = series.columns.template.column.states.create("hover");
		hoverState.properties.cornerRadiusTopLeft = 0;
		hoverState.properties.cornerRadiusTopRight = 0;
		hoverState.properties.fillOpacity = 1;

		series.columns.template.adapter.add("fill", function(fill, target) {
		  return chart.colors.getIndex(target.dataItem.index);
		});

		// Cursor
		chart.cursor = new am4charts.XYCursor();

		}); // end am4core.ready()
	</script>







	<!-- sentiment Trend Chart Three Botton  情緒字典按鈕設定-->
	
	<script>

		// First Botton
		var my_btn1 = document.querySelector('#pie_chart_btn');

		my_btn1.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#normalSentimentChart');
  		var bk2 = document.querySelector('#Positive_sent_wordcloud');
  		var bk3 = document.querySelector('#Negative_sent_wordcloud');
  		var bk4 = document.querySelector('#Positive_sent_bar');
   		var bk5 = document.querySelector('#Negative_sent_bar');
		  if (bk1.style.display == 'none') 
		 	{
      		 bk1.style.display = 'block';
      		 bk2.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';
  			} 
		}, false);

		// Second Botton
		var my_btn2 = document.querySelector('#cloud_word_btn');

		my_btn2.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#normalSentimentChart');
  		var bk2 = document.querySelector('#Positive_sent_wordcloud');
  		var bk3 = document.querySelector('#Negative_sent_wordcloud');
  		var bk4 = document.querySelector('#Positive_sent_bar');
   		var bk5 = document.querySelector('#Negative_sent_bar');

		   if (bk2.style.display == 'none' && bk3.style.display == 'none') 
		   {
      		 bk2.style.display = 'block';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';
  			}
		   else if (bk2.style.display == 'block' && bk3.style.display == 'none') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'block';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';
  			}
		   else if  (bk2.style.display == 'none' && bk3.style.display == 'block') 
		   {
      		 bk2.style.display = 'block';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'none';
  			}

		}, false);
		// Third Botton
		var my_btn3 = document.querySelector('#bar_chart_btn');

		my_btn3.addEventListener("click", function(e) {
  		e.preventDefault();
  		var bk1 = document.querySelector('#normalSentimentChart');
  		var bk2 = document.querySelector('#Positive_sent_wordcloud');
  		var bk3 = document.querySelector('#Negative_sent_wordcloud');
  		var bk4 = document.querySelector('#Positive_sent_bar');
  		var bk5 = document.querySelector('#Negative_sent_bar');


		   if (bk4.style.display == 'none' && bk5.style.display == 'none') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'block';
      		 bk5.style.display = 'none';
  			}
		   else if (bk4.style.display == 'block' && bk5.style.display == 'none') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'none';
      		 bk5.style.display = 'block';
  			}
		   else if  (bk4.style.display == 'none' && bk5.style.display == 'block') 
		   {
      		 bk2.style.display = 'none';
      		 bk1.style.display = 'none';
      		 bk3.style.display = 'none';
      		 bk4.style.display = 'block';
      		 bk5.style.display = 'none';
  			}
		}, false);
	</script>



	<!-- 正向情緒文字雲 -->
	<script>
		//取得d3顏色

	     var fill = d3.scaleOrdinal(d3.schemeCategory10);
	    //文字雲/關鍵字，及字型大小（這邊只放三個）
	    var data5 = []
		var dict5 = {{normlize_pos|safe}};

			for (key in dict5)
			{	
				data5.push({text:key, size:(dict5[key])*10});
			}



	    //取得呈現處的寬、高
	    var w = parseInt(d3.select("#Positive_sent_wordcloud").style("width"), 10);
	    var h = parseInt(d3.select("#Positive_sent_wordcloud").style("height"), 10);

	    d3.layout.cloud().size([w, h])
	            .words(data5)
	            .padding(2)

	            .rotate(function () {
	                return ~~(Math.random() * 2) * 90;
	            })
	            .rotate(function () {
	                return 0;
	            })
	            .font("Microsoft JhengHei") 
	            .fontSize(function (d) {
	                return d.size;
	            })

	            .on("end", draw)
	            .start();

	    	function draw(words) {
	        d3.select("#Positive_sent_wordcloud").append("svg")
	                .attr("width", w)
	                .attr("height", h)
	                .append("g")
	                .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")")
	                .selectAll("text")
	                .data(words)
	                .enter().append("text")
	                .style("font-size", function (d) {
	                    return d.size + "px";
	                })
	                .style("font-family", "Microsoft JhengHei")
	                .style("cursor", 'pointer')
	                .style("fill", function (d, i) {
	                    return fill(i);
	                })
	                .attr("text-anchor", "middle")
	                .attr("transform", function (d) {
	                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
	                })
	                .text(function (d) {
	                    return d.text;
	                })
	                .on("click", function (d) {
	                    window.open("/pos_table", '_blank');
	                });
	    }
	</script>

	<!-- 負向情緒文字雲 -->
	<script>
		//取得d3顏色

	     var fill = d3.scaleOrdinal(d3.schemeCategory10);
	    //文字雲/關鍵字，及字型大小（這邊只放三個）
	    var data6 = []
		var dict6 = {{normlize_neg|safe}};

			for (key in dict6)
			{	
				data6.push({text:key, size:(dict6[key])*10});
			}



	    //取得呈現處的寬、高
	    var w = parseInt(d3.select("#Negative_sent_wordcloud").style("width"), 10);
	    var h = parseInt(d3.select("#Negative_sent_wordcloud").style("height"), 10);

	    d3.layout.cloud().size([w, h])
	            .words(data6)
	            .padding(2)

	            .rotate(function () {
	                return ~~(Math.random() * 2) * 90;
	            })
	            .rotate(function () {
	                return 0;
	            })
	            .font("Microsoft JhengHei") 
	            .fontSize(function (d) {
	                return d.size;
	            })

	            .on("end", draw)
	            .start();

	    	function draw(words) {
	        d3.select("#Negative_sent_wordcloud").append("svg")
	                .attr("width", w)
	                .attr("height", h)
	                .append("g")
	                .attr("transform", "translate(" + w / 2 + "," + h / 2 + ")")
	                .selectAll("text")
	                .data(words)
	                .enter().append("text")
	                .style("font-size", function (d) {
	                    return d.size + "px";
	                })
	                .style("font-family", "Microsoft JhengHei")
	                .style("cursor", 'pointer')
	                .style("fill", function (d, i) {
	                    return fill(i);
	                })
	                .attr("text-anchor", "middle")
	                .attr("transform", function (d) {
	                    return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
	                })
	                .text(function (d) {
	                    return d.text;
	                })
	                .on("click", function (d) {
	                    window.open("/neg_table", '_blank');
	                });
	    }
	</script>


	<!-- 正向情緒  bar chart code -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

	    var data7 = []
		var dict7 = {{pos_sent_text_count|safe}};

			for (key in dict7)
			{	
				data7.push({"country":key, "visits":dict7[key]});
			}



		// Create chart instance
		var chart = am4core.create("Positive_sent_bar", am4charts.XYChart);
		chart.scrollbarX = new am4core.Scrollbar();

		// Add data
		chart.data = data7;

		// Create axes
		var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
		categoryAxis.dataFields.category = "country";
		categoryAxis.renderer.grid.template.location = 0;
		categoryAxis.renderer.minGridDistance = 30;
		categoryAxis.renderer.labels.template.horizontalCenter = "middle";
		categoryAxis.renderer.labels.template.verticalCenter = "middle";
		// categoryAxis.renderer.labels.template.rotation = 270;
		categoryAxis.tooltip.disabled = true;
		categoryAxis.renderer.minHeight = 110;

		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
		valueAxis.renderer.minWidth = 50;

		// Create series
		var series = chart.series.push(new am4charts.ColumnSeries());
		series.sequencedInterpolation = true;
		series.dataFields.valueY = "visits";
		series.dataFields.categoryX = "country";
		series.tooltipText = "[{categoryX}: bold]{valueY}[/]";
		series.columns.template.strokeWidth = 0;

		series.tooltip.pointerOrientation = "vertical";

		series.columns.template.column.cornerRadiusTopLeft = 10;
		series.columns.template.column.cornerRadiusTopRight = 10;
		series.columns.template.column.fillOpacity = 0.8;

		// on hover, make corner radiuses bigger
		var hoverState = series.columns.template.column.states.create("hover");
		hoverState.properties.cornerRadiusTopLeft = 0;
		hoverState.properties.cornerRadiusTopRight = 0;
		hoverState.properties.fillOpacity = 1;

		series.columns.template.adapter.add("fill", function(fill, target) {
		  return chart.colors.getIndex(target.dataItem.index);
		});

		// Cursor
		chart.cursor = new am4charts.XYCursor();

		}); // end am4core.ready()
	</script>

	<!-- 負向情緒  bar chart code -->
	<script>
		am4core.ready(function() {

		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end

	    var data8 = []
		var dict8 = {{neg_sent_text_count|safe}};

			for (key in dict8)
			{	
				data8.push({"country":key, "visits":dict8[key]});
			}



		// Create chart instance
		var chart = am4core.create("Negative_sent_bar", am4charts.XYChart);
		chart.scrollbarX = new am4core.Scrollbar();

		// Add data
		chart.data = data8;

		// Create axes
		var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
		categoryAxis.dataFields.category = "country";
		categoryAxis.renderer.grid.template.location = 0;
		categoryAxis.renderer.minGridDistance = 30;
		categoryAxis.renderer.labels.template.horizontalCenter = "middle";
		categoryAxis.renderer.labels.template.verticalCenter = "middle";
		// categoryAxis.renderer.labels.template.rotation = 270;
		categoryAxis.tooltip.disabled = true;
		categoryAxis.renderer.minHeight = 110;

		var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());
		valueAxis.renderer.minWidth = 50;

		// Create series
		var series = chart.series.push(new am4charts.ColumnSeries());
		series.sequencedInterpolation = true;
		series.dataFields.valueY = "visits";
		series.dataFields.categoryX = "country";
		series.tooltipText = "[{categoryX}: bold]{valueY}[/]";
		series.columns.template.strokeWidth = 0;

		series.tooltip.pointerOrientation = "vertical";

		series.columns.template.column.cornerRadiusTopLeft = 10;
		series.columns.template.column.cornerRadiusTopRight = 10;
		series.columns.template.column.fillOpacity = 0.8;

		// on hover, make corner radiuses bigger
		var hoverState = series.columns.template.column.states.create("hover");
		hoverState.properties.cornerRadiusTopLeft = 0;
		hoverState.properties.cornerRadiusTopRight = 0;
		hoverState.properties.fillOpacity = 1;

		series.columns.template.adapter.add("fill", function(fill, target) {
		  return chart.colors.getIndex(target.dataItem.index);
		});

		// Cursor
		chart.cursor = new am4charts.XYCursor();

		}); // end am4core.ready()
	</script>


</body>
</html>